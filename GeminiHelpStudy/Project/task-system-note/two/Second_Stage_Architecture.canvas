{
	"nodes":[
		{"id":"controllers","type":"text","text":"### ğŸ® Controller Layer (RestAPI)\n\n- **AuthController**: `/auth/login` (é¢å‘ Token)\n- **TaskController**: ä»»åŠ¡ CRUD, AI ç”Ÿæˆ\n- **ShopController**: `/shop/buy` (æ¥æ”¶ JSON Body)\n- **GlobalExceptionHandler**: ç»Ÿä¸€æ•è· `TaskException`","x":-260,"y":-100,"width":360,"height":300,"color":"3"},
		{"id":"entity_dto","type":"text","text":"### ğŸ“¦ Entities & DTOs\n\n- **Entity**: `User`, `Task`, `PlayerStatus`, `Item`\n- **DTO**: `BuyRequest` (è§£å†³ Post å‚æ•°é—®é¢˜), `PageResult`\n- **Response**: `InfoResponse`","x":-260,"y":300,"width":360,"height":200,"color":"6"},
		{"id":"frontend_ui","type":"text","text":"### ğŸ–¥ï¸ Frontend (Vue 3)\n**Tech**: Vite + Element Plus\n\n- **Login.vue**: JWT å­˜å‚¨ `localStorage`\n- **Game.vue**: ä»»åŠ¡åˆ—è¡¨ (PageHelper), çŠ¶æ€é¢æ¿\n- **Shop.vue**: å•†åº—ç½‘æ ¼, è´­ä¹°äº¤äº’\n- **request.js**: Axios æ‹¦æˆªå™¨ (Auto-Bearer Token)","x":-1460,"y":-100,"width":400,"height":380,"color":"1"},
		{"id":"security_layer","type":"text","text":"### ğŸ›¡ï¸ Security Layer\n**Spring Security + JWT**\n\n1. **JwtAuthenticationFilter**: æ‹¦æˆªè¯·æ±‚\n2. **Header Check**: è§£æ `Authorization: Bearer ...`\n3. **UserDetail**: æ³¨å…¥ SecurityContext\n4. **Exception**: 401/403 ç»Ÿä¸€å¤„ç†","x":-780,"y":-100,"width":350,"height":260,"color":"2"},
		{"id":"service_shop","type":"text","text":"### ğŸ›’ ShopService\n[[ShopServiceImpl.java]]\n\n**æ ¸å¿ƒé€»è¾‘ (@Transactional)**\n1. åº“å­˜æ£€æŸ¥ (Stack)\n2. ä½™é¢æ£€æŸ¥ (Switch-Case å¤šè´§å¸)\n3. **åŸå­æ“ä½œ**: æ‰£é’± + å‘è´§ + æ‰£åº“å­˜","x":300,"y":200,"width":380,"height":240,"color":"4"},
		{"id":"service_task","type":"text","text":"### ğŸ§  TaskService & AI\n[[TaskServiceImpl.java]]\n\n- **PageHelper**: åˆ†é¡µæŸ¥è¯¢ä»»åŠ¡åˆ—è¡¨\n- **Data Isolation**: `where user_id = ?`\n- **AiTaskService**: æ³¨å…¥å†å²ä»»åŠ¡ Context (Memory)","x":300,"y":-160,"width":380,"height":280,"color":"4"},
		{"id":"mappers","type":"text","text":"### ğŸ› ï¸ Mapper Layer (MyBatis)\n\n- **UserMapper**: `findByUsername`\n- **ShopMapper**: åŠ¨æ€ SQL æŸ¥è¯¢å•†å“\n- **TaskMapper**: `useGeneratedKeys=\"true\"` (å›å¡« ID)","x":800,"y":0,"width":300,"height":300,"color":"5"},
		{"id":"ai_cloud","type":"text","text":"â˜ï¸ **DeepSeek V3**\n(Context Aware)","x":300,"y":-340,"width":380,"height":100,"color":"6"},
		{"id":"db_mysql","type":"text","text":"ğŸ—„ï¸ **MySQL Database**\n\n- `users`: é‰´æƒ\n- `shop_items`: å•†å“åº“\n- `task`: å¢åŠ  `user_id` å¤–é”®","x":1200,"y":60,"width":240,"height":180,"color":"6"}
	],
	"edges":[
		{"id":"e1","fromNode":"frontend_ui","fromSide":"right","toNode":"security_layer","toSide":"left","label":"HTTP Request (w/ Token)"},
		{"id":"e2","fromNode":"security_layer","fromSide":"right","toNode":"controllers","toSide":"left","label":"Authenticated"},
		{"id":"e3","fromNode":"security_layer","fromSide":"bottom","toNode":"frontend_ui","toSide":"bottom","color":"1","label":"403 (Force Logout)"},
		{"id":"e4","fromNode":"controllers","fromSide":"right","toNode":"service_task","toSide":"left","label":"Task Ops"},
		{"id":"e5","fromNode":"controllers","fromSide":"right","toNode":"service_shop","toSide":"left","label":"Buy Ops"},
		{"id":"e6","fromNode":"service_task","fromSide":"right","toNode":"mappers","toSide":"left","label":"CRUD"},
		{"id":"e7","fromNode":"service_shop","fromSide":"right","toNode":"mappers","toSide":"left","label":"Transaction"},
		{"id":"e8","fromNode":"mappers","fromSide":"right","toNode":"db_mysql","toSide":"left","label":"SQL"},
		{"id":"e9","fromNode":"controllers","fromSide":"bottom","toNode":"entity_dto","toSide":"top","label":"Uses"},
		{"id":"e10","fromNode":"service_task","fromSide":"top","toNode":"ai_cloud","toSide":"bottom","label":"Prompt + History"}
	]
}