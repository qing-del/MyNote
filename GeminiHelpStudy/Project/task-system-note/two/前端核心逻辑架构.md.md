### ðŸ“„ ç¬”è®° 3ï¼šå‰ç«¯æ ¸å¿ƒé€»è¾‘æž¶æž„ (Frontend Logic)
è¯´æ˜Žï¼š æ•´ç† Login.vue å’Œ Game.vue ä¸­çš„æ ¸å¿ƒæ¨¡å¼ï¼Œæ–¹ä¾¿ä»¥åŽå¤ç”¨ã€‚

# ðŸ–¥ï¸ Vue 3 + Element Plus æ ¸å¿ƒæ¨¡å¼

## 1. ç™»å½•ä¸Ž Token å¤„ç† (Login.vue)

### æ ¸å¿ƒæµç¨‹
1. **è¡¨å•ç»‘å®š**: ä½¿ç”¨ `reactive` ç»‘å®š `username/password`ã€‚
2. **è¯·æ±‚å‘é€**: è°ƒç”¨å°è£…å¥½çš„ `request.post`ã€‚
3. **Token å­˜å‚¨**: æˆåŠŸåŽ `localStorage.setItem('token', res.token)`ã€‚
4. **è·¯ç”±è·³è½¬**: `router.push('/game')`ã€‚

```javascript
// ä»£ç ç‰‡æ®µï¼šç™»å½•é€»è¾‘
const handleLogin = async () => {
  try {
    const res = await request.post('/api/auth/login', form)
    localStorage.setItem('token', res.token) // å­˜ Token
    router.push('/game')
  } catch (error) {
    // é”™è¯¯å¤„ç†...
  }
}
````

## 2. çŠ¶æ€é¢æ¿ä¸Žæ•°æ®è§£æž (Game.vue)

### JWT è§£æž

å‰ç«¯ä¸ä¾èµ–åŽç«¯è¿”å›žç”¨æˆ·åï¼Œè€Œæ˜¯ç›´æŽ¥è§£æž Token ä¸­çš„ Payloadã€‚

```JavaScript
import { jwtDecode } from 'jwt-decode'
const token = localStorage.getItem('token')
const username = jwtDecode(token).sub // èŽ·å– subject (ç”¨æˆ·å)
```

### ç»éªŒæ¡è®¡ç®—é€»è¾‘

å¤„ç† `el-progress` çš„ç™¾åˆ†æ¯”æ˜¾ç¤ºï¼Œé˜²æ­¢é™¤ä»¥ 0 é”™è¯¯ã€‚

```JavaScript
const calculateExpPercent = () => {
  const max = getNextLevelExp()
  // å…œåº•é€»è¾‘ï¼šå¦‚æžœæœ€å¤§ç»éªŒä¸º0ï¼Œé¿å… NaN
  if (max === 0) return 0; 
  return Math.min((player.currentExp / max) * 100, 100)
}
```

## 3. ç½‘ç»œè¯·æ±‚æ‹¦æˆªå™¨ (request.js)

_è¿™æ˜¯å‰ç«¯çš„â€œå®ˆé—¨å‘˜â€ã€‚_

- **Request**: æ¯æ¬¡è¯·æ±‚è‡ªåŠ¨åœ¨ Header åŠ  `Authorization: Bearer token`ã€‚
    
- **Response**:
    
    - æˆåŠŸï¼šè¿”å›ž `res.data`ã€‚
        
    - å¤±è´¥ (401/403)ï¼š`ElMessage` æŠ¥é”™ -> `removeItem('token')` -> è·³è½¬ç™»å½•é¡µã€‚
        