---
title: Spring Task
tags:
 - Spring
 - Spring Task
create_time: 2026-02-15
---

# Spring Task å­¦ä¹ ç¬”è®°

## ä¸€ã€ Spring Task ä»‹ç»

Spring Task æ˜¯Springæ¡†æ¶æä¾›çš„ä»»åŠ¡è°ƒåº¦å·¥å…·ï¼Œå¯ä»¥æŒ‰ç…§çº¦å®šçš„æ—¶é—´è‡ªåŠ¨æ‰§è¡ŒæŸä¸ªä»£ç é€»è¾‘ã€‚
* **å®šä½**ï¼šå®šæ—¶ä»»åŠ¡æ¡†æ¶ã€‚
* **ä½œç”¨**ï¼šå®šæ—¶è‡ªåŠ¨æ‰§è¡ŒæŸæ®µJavaä»£ç ã€‚

### 1. åº”ç”¨åœºæ™¯
åªè¦æ˜¯éœ€è¦å®šæ—¶å¤„ç†çš„åœºæ™¯éƒ½å¯ä»¥ä½¿ç”¨Spring Taskã€‚å¸¸è§çš„å…¸å‹åœºæ™¯åŒ…æ‹¬ï¼š
* ä¿¡ç”¨å¡æ¯æœˆè¿˜æ¬¾æé†’
* é“¶è¡Œè´·æ¬¾æ¯æœˆè¿˜æ¬¾æé†’
* ç«è½¦ç¥¨å”®ç¥¨ç³»ç»Ÿå¤„ç†æœªæ”¯ä»˜è®¢å•
* å…¥èŒçºªå¿µæ—¥ä¸ºç”¨æˆ·å‘é€é€šçŸ¥

**ğŸ’¡ æ‰©å±•åœºæ™¯è¡¥å……**ï¼š
* **æ•°æ®æŠ¥è¡¨**ï¼šç”µå•†å¹³å°æ¯æ—¥å‡Œæ™¨ç»Ÿè®¡å‰ä¸€å¤©çš„é”€å”®æ•°æ®å¹¶ç”ŸæˆæŠ¥è¡¨ã€‚
* **ç³»ç»Ÿç»´æŠ¤**ï¼šå®šæ—¶æ¸…ç†æ•°æ®åº“ä¸­è¿‡æœŸçš„éªŒè¯ç ï¼Œæˆ–å®šæœŸæ¸…ç†æœåŠ¡å™¨äº§ç”Ÿçš„ä¸´æ—¶æ—¥å¿—æ–‡ä»¶ã€‚
* **çŠ¶æ€åŒæ­¥**ï¼šå®šæ—¶è°ƒç”¨ç¬¬ä¸‰æ–¹ API æ‹‰å–æœ€æ–°æ•°æ®åŒæ­¥åˆ°æœ¬åœ°ï¼ˆå¦‚æ±‡ç‡ã€å¤©æ°”é¢„æŠ¥ç­‰ï¼‰ã€‚

### 2. ä½¿ç”¨å‰æ
> [!warning] è­¦å‘Š
> è¦ä½¿ç”¨çš„å‰ææ˜¯åœ¨å¯åŠ¨ç±»ï¼ˆæˆ–é…ç½®ç±»ï¼‰ä¸ŠåŠ å…¥ `@EnableScheduling` æ³¨è§£ã€‚

---

## äºŒã€ Cronè¡¨è¾¾å¼

cronè¡¨è¾¾å¼å…¶å®å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šè¿‡cronè¡¨è¾¾å¼å¯ä»¥å®šä¹‰ä»»åŠ¡è§¦å‘çš„æ—¶é—´ã€‚

### 1. æ„æˆè§„åˆ™
* åˆ†ä¸º 6 æˆ– 7 ä¸ªåŸŸï¼Œç”±ç©ºæ ¼åˆ†éš”å¼€ï¼Œæ¯ä¸ªåŸŸä»£è¡¨ä¸€ä¸ªå«ä¹‰ã€‚
* æ¯ä¸ªåŸŸçš„å«ä¹‰åˆ†åˆ«ä¸ºï¼šç§’ã€åˆ†é’Ÿã€å°æ—¶ã€æ—¥ã€æœˆã€å‘¨ã€å¹´(å¯é€‰)ã€‚

### 2. è¡¨è¾¾å¼è§£æä¸ç¤ºä¾‹
ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥å‚ç…§ä¸‹è¡¨ï¼š

| ç§’ | åˆ†é’Ÿ | å°æ—¶ | æ—¥ | æœˆ | å‘¨ | å¹´(å¯é€‰) |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| 0 | 0 | 9 | 12 | 10 | ? | 2022 |

* **æ¡ˆä¾‹è§£æ**ï¼šå¦‚ä¸Šè¡¨æ‰€ç¤ºï¼Œ`0 0 9 12 10 ? 2022` å¯¹åº”çš„cronè¡¨è¾¾å¼è§¦å‘æ—¶é—´ä¸ºï¼š**2022å¹´10æœˆ12æ—¥ä¸Šåˆ9ç‚¹æ•´**ã€‚

**ğŸ’¡ å¸¸è§æ‰©å±•ç¤ºä¾‹**ï¼š
* `0/5 * * * * ?`ï¼šæ¯éš” 5 ç§’æ‰§è¡Œä¸€æ¬¡ï¼ˆä¹Ÿæ˜¯æˆ‘ä»¬å…¥é—¨ç¨‹åºä¸­çš„å†™æ³•ï¼‰ã€‚
* `0 0 0 * * ?`ï¼šæ¯å¤©å‡Œæ™¨ 0 ç‚¹æ•´æ‰§è¡Œä¸€æ¬¡ã€‚
* `0 15 10 * * ?`ï¼šæ¯å¤©ä¸Šåˆ 10:15 è§¦å‘ã€‚
* `0 0/30 9-17 * * ?`ï¼šæœä¹æ™šäº”å·¥ä½œæ—¶é—´å†…æ¯åŠå°æ—¶è§¦å‘ä¸€æ¬¡ã€‚

> [!info] æŠ€å·§
> åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯ä»¥ä¸ç”¨è‡ªå·±å»æ­»è®°ç¡¬èƒŒå†™è¡¨è¾¾å¼ï¼Œç”¨åœ¨çº¿ç”Ÿæˆå™¨ï¼ˆå¦‚æœç´¢â€œåœ¨çº¿Cronè¡¨è¾¾å¼ç”Ÿæˆå™¨â€ï¼‰ç”Ÿæˆä¸€ä¸‹å°±å¥½äº†ï¼Œæ—¢å¿«åˆä¸å®¹æ˜“å‡ºé”™ã€‚

---

## ä¸‰ã€ å…¥é—¨ç¨‹åº

å¼€å‘ä¸€ä¸ªå®Œæ•´çš„ Spring Task å®šæ—¶ä»»åŠ¡ï¼Œé€šå¸¸éœ€è¦ä»¥ä¸‹ä¸¤æ­¥ï¼š

**1. å¼€å¯å®šæ—¶ä»»åŠ¡æ”¯æŒ**
åœ¨é¡¹ç›®çš„å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£ï¼Œè®© Spring Boot çŸ¥é“ä½ éœ€è¦ä½¿ç”¨å®šæ—¶ä»»åŠ¡åŠŸèƒ½ã€‚
```java
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.scheduling.annotation.EnableScheduling;

@SpringBootApplication
@EnableScheduling // å¿…é¡»æ·»åŠ æ­¤æ³¨è§£å¼€å¯å®šæ—¶ä»»åŠ¡
public class MyApplication {
    public static void main(String[] args) {
        SpringApplication.run(MyApplication.class, args);
    }
}
```

**2. ç¼–å†™å®šæ—¶ä»»åŠ¡é€»è¾‘** ä½¿ç”¨ `@Component` å°†ç±»äº¤ç”± Spring å®¹å™¨ç®¡ç†ï¼Œå¹¶åœ¨å…·ä½“çš„æ–¹æ³•ä¸Šä½¿ç”¨ `@Scheduled` æ³¨è§£æŒ‡å®šåˆšæ‰å­¦åˆ°çš„ Cron è¡¨è¾¾å¼ã€‚

```Java
import lombok.extern.slf4j.Slf4j;
import org.springframework.scheduling.annotation.Scheduled;
import org.springframework.stereotype.Component;
import java.util.Date;

@Component
@Slf4j
public class MyTask{
    
    // cron è¡¨è¾¾å¼å®šä¹‰äº†è¯¥æ–¹æ³•æ¯éš” 5 ç§’å°±ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ä¸€æ¬¡
    @Scheduled(cron = "0/5 * * * * ?")
    public void executeTask(){
        log.info("å®šæ—¶ä»»åŠ¡å¼€å§‹æ‰§è¡Œï¼š{}", new Date());
    }
}
```